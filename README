See http://github.com/moiristo/dynamic_attributes